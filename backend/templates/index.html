{% load static %}
<!DOCTYPE html>
<html lang="en-US">


<head>
	<meta charset="utf-8" />
	<link rel="stylesheet" href="{% static 'myglobal.css' %}">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
	<script src="{% static 'javascript/profil/achievement_and_stat.js' %}" ></script>
	<script src="{% static 'javascript/profil/contact.js' %}" ></script>


	<title>PONG</title>

	<script>
		
		
		function openPopupLog(){
		let popup = document.getElementById("popupLogin");
		popup.classList.add("open-Popup");
		document.getElementById("btn-log").style.display= "none";
		document.getElementById("btn-sign").style.display= "none";
		document.getElementById("btn-log").style.visibility= "hidden";
		document.getElementById("btn-sign").style.visibility= "hidden";
		}
		
		function openPopupSign(){
		let popup2 = document.getElementById("popupSign");
		popup2.classList.add("open-Popup");
		document.getElementById("btn-log").style.display= "none";
		document.getElementById("btn-sign").style.display= "none";
		document.getElementById("btn-log").style.visibility= "hidden";
		document.getElementById("btn-sign").style.visibility= "hidden";
		}
  
		function swapToSign(){
		let popup = document.getElementById("popupLogin");
		let popup2 = document.getElementById("popupSign");

		  popup.classList.remove("open-Popup");
		  popup2.classList.add("open-Popup");
		}
  
		function swapToLog(){
		let popup2 = document.getElementById("popupSign");
		let popup = document.getElementById("popupLogin");

		  popup.classList.add("open-Popup");
		  popup2.classList.remove("open-Popup");
		}

		function addHeader(){
			let header = document.getElementById("header");
			if (header === null)
			{
				fetch(`0`)
				.then(response => response.text())
				.then (text => {
					document.querySelector('#Header').innerHTML = text
				}
				)
			}
		}

		function removeHeader(){
			let header = document.getElementById("header");
			if (header === null)
				return ;
			document.getElementById("header").remove()
		}

		function showcontent(num, data) {
			fetch(`${num}`,
			{
			  method: 'POST',
			  body: data,
			},)
				.then(response => response.text())
				.then (text => {
					document.getElementById("Page").remove()
					let body = document.getElementById('body');
					document.querySelector('#content').innerHTML = text;

					switch (num) {
						case "1":
						case "2":
						case "3":
							body.style.backgroundImage = 'url(/static/image/background/mainpage.png)';
							addHeader();
							break;
						case "4":
							body.style.backgroundImage = 'url(/static/image/background/waitpage.png)';
							addHeader();
							break;
						case "5":
							body.style.backgroundImage = 'url(/static/image/background/waitpage.png)';
							addHeader();
							break;
						case "6":
							body.style.backgroundImage = 'url(https://images.squarespace-cdn.com/content/v1/5925832e03596efb6d4b502a/1547827451369-JX3S8JTAWQMWHYFYDVNK/Magma.jpg?format=2500w)';
							addHeader();
							break;
						case "7":
							body.style.backgroundImage = 'url(/static/image/background/DRG_Wallpaper_CrystalCaves.jpg)';
							addHeader();
							break;
						case "8":
							body.style.backgroundImage = 'url(/static/image/background/Background.png)';
							removeHeader();
							break;
						default:
							break;
					}

					/* this is an advertissement : don't try to understand, i know, you don't*/
					var scripts = document.querySelector('#content').querySelectorAll("script");
					for (var i = 0; i < scripts.length; i++) {
						console.log("SCRIPT : " + scripts[i])
						console.log("len : " + scripts.length)
						if (scripts[i].innerText) {
						  eval(scripts[i].innerText);
						} else {
						  console.log("src : " + scripts[i].src)
						  fetch(scripts[i].src).then(function (data) {
							data.text().then(function (r) {
							  eval(r);
							})
						  });
					
						}
						// To not repeat the element
						//scripts[i].parentNode.removeChild(scripts[i]);
					  }
					
				})
		}

	</script>
</head>


<body id="body">
	<div id="Header"> 
	</div>
	<div id="content">  
	<div id="Page">  






		<H1 class="title">ROCK AND PONG</H1>
		<button type="button" class ="btn-drg" id = "btn-log" onclick="openPopupLog()">LOG IN</button>
		<button type="button" class ="btn-drg" id = "btn-sign" onclick="openPopupSign()">SIGN IN</button>
			
  
			<div class ="popupLogin" id = "popupLogin">
				
				<form id="form_log" method="post">
					{% csrf_token %}
					<div class ="rectLogin" id = "rectLogin">
						<div class ="textRectLogin" id = "textRectLogin">
							<p id="textLogin">LOG-IN</p>
						</div>
						<input type="text" id="login" name="login" required><br>
						<div class ="speratorLogin" id = "speratorlog"></div>
					</div>
					
					<div class ="rectPassword" id = "rectPassword">
						<div class ="textRectPassword" id = "textRectPassword">
							<p id="textPassword">PASSWORD</p>
						</div>
						<input type="password" id="password" name="password" required><br>
						<div class ="speratorPassword" id = "speratorPassword"></div>
					</div>
					
					<button data-section="1" type="submit" class ="btn-drg" id = "btn-pop-login">LOG IN</button>
					<script>

						const form = document.getElementById('form_log');

						form.addEventListener('submit', async event => {
						  event.preventDefault();
						
						  const data = new FormData(form);
							showcontent('1', data)
						});
					</script>
				</form>

			  <p id="text42">STUDENT AT 42 ?</p>
			  <button type="button" class ="btn-drg" id = "btn-pop-link-42">LINK 42</button>
			  <p id="textPopSignIn">NEW ?</p>
			  <button type="button" class ="btn-drg" id = "btn-popLog-sign" onclick="swapToSign()">SIGN IN</button>
			  
		  </div>
  
  
		  <div class ="popupSign" id = "popupSign">
			<form id="form_sign" method="post">
				{% csrf_token %}
			  <div class ="rectLogin" id = "rectLogin">
				  <div class ="textRectLogin" id = "textRectLogin">
					  <p id="textLogin">LOG-IN</p>
				  </div>
				  <input type="text" id="loginSign" name="login2" required><br><br>
				  <div class ="speratorLogin" id = "speratorlog"></div>
			  </div>
			  
			  <div class ="rectPassword" id = "rectPassword">
				  <div class ="textRectPassword" id = "textRectPassword">
					  <p id="textPassword">PASSWORD</p>
				  </div>
				  <input type="password" id="passwordSign" name="password2" required><br><br>
				  <div class ="speratorPassword" id = "speratorPassword"></div>
			  </div>
			  
			  <div class ="rectConfirm" id = "rectConfirm">
				  <div class ="textRectConfirm" id = "textRectConfirm">
					  <p id="textConfirm">CONFIRM</p>
				  </div>
				  <input type="password" id="confirm" name="confirm" required><br><br>
				  <div class ="speratorConfirm" id = "speratorConfirm"></div>
			  </div>
			  
			  <button data-section="2" type="submit" class ="btn-drg" id = "btn-pop-sign">SIGN IN</button>
					<script>

						const form2 = document.getElementById('form_sign');
						form2.addEventListener('submit', async event => {
						  event.preventDefault();
						
						  const data2 = new FormData(form2);
							showcontent('2', data2)
						});
			</script>
		</form>
		<p id="text42">STUDENT AT 42 ?</p>
		<button type="button" class ="btn-drg" id = "btn-pop-link-42">LINK 42</button>
		<p id="textPopLogIn">ALREADY AN ACCOUT ?</p>
		<button type="button" class ="btn-drg" id = "btn-pop-sign-log" onclick="swapToLog()">LOG IN</button>
			  
		  </div>








	</div>
	</div>
  </body>
  
  </html>
